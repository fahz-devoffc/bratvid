<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>BratVid Maker • Free By Fahz</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{box-sizing:border-box;font-family:system-ui,Segoe UI,sans-serif}
body{margin:0;min-height:100vh;background:linear-gradient(135deg,#020617,#0b0f1a);display:flex;align-items:center;justify-content:center;color:#fff}

.app{width:100%;max-width:520px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);border-radius:18px;padding:20px;box-shadow:0 0 40px rgba(0,0,0,.6)}

h1{text-align:center;margin-bottom:6px;font-size:22px}
p{text-align:center;font-size:12px;opacity:.7;margin-bottom:16px}

input{width:100%;padding:12px;border-radius:10px;border:none;background:rgba(255,255,255,.08);color:#fff;margin-bottom:10px}

button{width:100%;padding:12px;border:none;border-radius:12px;background:linear-gradient(135deg,#22c55e,#16a34a);font-weight:600;cursor:pointer;margin-top:6px}

.preview{margin-top:16px;background:rgba(0,0,0,.4);border-radius:14px;padding:12px;text-align:center}

video{width:100%;border-radius:12px;max-height:300px}

.controls{display:flex;gap:10px;margin-top:10px}
.controls button{flex:1;background:linear-gradient(135deg,#38bdf8,#0ea5e9)}

.status{font-size:12px;text-align:center;margin-top:10px;opacity:.7}

.footer{text-align:center;font-size:10px;opacity:.4;margin-top:12px}
</style>
</head>
<body>

<div class="app">
  <h1>BratVid Maker</h1>
  <p>Powered By RestAPI • Tools By Fahz</p>

  <input id="text" placeholder="Teks video (contoh: halo bro apakabar)">
  <input id="words" placeholder="Warna teks (contoh: black, blue, red)">

  <button onclick="generate()">Generate Video</button>

  <div class="preview" id="preview" style="display:none;">
    <video id="video" controls></video>
    <div class="controls">
      <button onclick="fullscreen()">Fullscreen</button>
      <button onclick="downloadVid()">Download</button>
    </div>
  </div>

  <div class="status" id="status">Waiting...</div>

  <div class="footer">Status : Public</div>
</div>

<script>
let videoBlobUrl = '';

async function generate(){
  const text = document.getElementById('text').value;
  const words = document.getElementById('words').value;
  const status = document.getElementById('status');
  const preview = document.getElementById('preview');
  const video = document.getElementById('video');

  if(!text || !words){
    status.innerText = '❌ Semua field wajib diisi';
    return;
  }

  status.innerText = '⏳ Generating video...';
  preview.style.display = 'none';

  const api = `https://api.zenitsu.web.id/api/maker/bratvid?text=${encodeURIComponent(text)}&words=${encodeURIComponent(words)}`;

  /* CORS SAFE PROXY */
  const proxy = `https://api.allorigins.win/raw?url=${encodeURIComponent(api)}`;

  try{
    const res = await fetch(proxy);
    const blob = await res.blob();
    videoBlobUrl = URL.createObjectURL(blob);
    video.src = videoBlobUrl;
    preview.style.display = 'block';
    status.innerText = '✅ Video berhasil dibuat';
  }catch(e){
    status.innerText = '❌ Gagal generate video';
  }
}

function fullscreen(){
  const video = document.getElementById('video');
  if(video.requestFullscreen){video.requestFullscreen();}
  else if(video.webkitRequestFullscreen){video.webkitRequestFullscreen();}
  else if(video.msRequestFullscreen){video.msRequestFullscreen();}
}

function downloadVid(){
  if(!videoBlobUrl) return;
  const a = document.createElement('a');
  a.href = videoBlobUrl;
  a.download = 'bratvid.mp4';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
}
</script>

</body>
</html>
